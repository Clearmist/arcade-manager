<h2>Local overlays</h2>

<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="pages/index.html" class="navmenu">Home</a></li>
        <li class="breadcrumb-item"><a href="pages/overlays/index.html" class="navmenu">Install overlays</a></li>
        <li class="breadcrumb-item active" aria-current="page">Local pack</li>
    </ol>
</nav>

<!-- Overlays pack -->
<div class="input-group mb-0">
    <div class="input-group-prepend">
        <span class="input-group-text">Overlays pack</span>
    </div>
    <input type="text" class="form-control" id="overlayPack">
    <div class="input-group-append">
        <button class="btn btn-outline-secondary browse folder" type="button" data-input="overlayPack">Browse</button>
    </div>
</div>
<p class="mt-0 mb-3">
    <small class="form-text text-muted">The root folder of the overlay pack</small>
</p>

<!-- Roms folder -->
<div class="input-group mb-0">
    <div class="input-group-prepend">
        <span class="input-group-text">Roms folder</span>
    </div>
    <input type="text" class="form-control" id="roms">
    <div class="input-group-append">
        <button class="btn btn-outline-secondary browse folder" type="button" data-input="roms">Browse</button>
    </div>
</div>
<p class="mt-0 mb-3">
    <small class="form-text text-muted">The folder containing your roms</small>
</p>

<!-- path to config -->
<div class="input-group mb-0">
    <div class="input-group-prepend">
        <span class="input-group-text">Retropie config</span>
    </div>
    <input type="text" class="form-control" id="configFolder">
    <div class="input-group-append">
        <button class="btn btn-outline-secondary browse folder" type="button" data-input="configFolder">Browse</button>
    </div>
</div>
<p class="mt-0 mb-3">
    <small class="form-text text-muted">The path to the Retropie config share</small>
</p>

<p class="mt-3">
    <button type="button" id="buttonInstall" class="btn btn-primary btn-lg btn-block">Install</button>
</p>

<script>
$('#buttonInstall').on('click', () => {
    let overlayPack = $('#overlayPack').val(),
        roms = $('#roms').val(),
        configFolder = $('#configFolder').val();
    
    if (overlayPack === '') { window.alert('Please choose an overlay pack.'); return; }
    if (roms === '') { window.alert('Please choose the path to the roms folder.'); return; }
    if (configFolder === '') { window.alert('Please choose the config folder.'); return; }
    if (!overlays.checkAccess(roms, true)) { window.alert('The specified roms folder cannot be written to.'); return; }
    if (!overlays.checkAccess(path.join(configFolder, 'all/retroarch/'), true)) { window.alert('The specified config folder cannot be written to.'); return; }

    overlays.installPack(roms, configFolder, overlayPack);
});
</script>