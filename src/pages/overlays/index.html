<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="pages/index.html" class="navmenu">Home</a></li>
        <li class="breadcrumb-item active" aria-current="page">Install overlays</li>
    </ol>
</nav>

<p>
    An overlay is an image that shows around the game screen/area, replacing the black bars.<br>
    This tool will install only the overlays you need from pre-configured packs.
</p>

<h2>Install overlays</h2>

<div class="list-group">
    <a href="pages/overlays/download.html" class="navmenu list-group-item list-group-item-action text-primary">
        <i class="icon-download"></i> Download and install an overlays pack</a>
    <a href="pages/overlays/local.html" class="navmenu list-group-item list-group-item-action text-primary">
        <i class="icon-folder-open"></i> Install a local overlays pack</a>
</div>

<h2 class="mt-4">Download packs</h2>

<div class="row" id="overlayslinks"></div>

<script>
$(() => {
    let data = JSON.parse(fs.readFileSync(path.join(__dirname, 'data.json'), { encoding: 'utf8' }));
    let template = $('#linkTemplate').html();

    let colsize = 12 / data.overlays.length;
    if (colsize < 3) { colsize = 3; }

    for (let ovl of data.overlays) {
        let li = $(template);

        // layout
        li.addClass('col-' + colsize);

        // display pack infos
        li.find('.name').text(ovl.name);
        li.find('.desc').text(ovl.description);
        if (ovl.image !== '') {
            li.find('img').attr('src', ovl.image);
        } else {
            li.find('img').remove();
        }

        // open the link in default browser
        let url = 'https://github.com/' + ovl.repository + '/releases';
        li.on('click', (e) => {
            shell.openExternal(url);
            e.preventDefault();
        });

        $('#overlayslinks').append(li);
    }
});
</script>

<script type="text/template" id="linkTemplate">
    <div>
        <a href="#" class="border border-primary rounded d-block p-2">
            <img src="" class="float-left mr-3">
            <h5 class="mb-1 name"></h5>
            <p class="mb-0 desc"></p>
        </a>
    </div>
</script>
